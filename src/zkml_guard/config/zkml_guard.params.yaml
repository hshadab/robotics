zkml_guard:
  ros__parameters:
    # Gating defaults tuned for JOLT Atlas
    gating_mode: argmax
    threshold: 0.40  # Confidence threshold for triggering proof generation
    require_proof: true

    # Inference rate control
    inference_period_ms: 2000     # Run inference every 2 seconds (slower = more stable)

    # Proof cadence optimizations
    prove_on: rising_edge         # or: every_pass
    unlock_hold_ms: 10000         # keep unlocked for 10 seconds after verify (demo default)
    reprove_on_label_change: false  # Don't cancel proof if label changes during generation (prevents proof cancellation)

    # ONNX + labels auto-download cache
    # Leave commented to auto-download MobileNetV2 from ONNX Model Zoo
    # model_path: "~/.cache/zkml_guard/models/mobilenetv2-7.onnx"
    # labels_path: "~/.cache/zkml_guard/imagenet_classes.txt"

    # Use external HTTP verifier by default (your /onnx-verifier service)
    verifier_mode: http
    verifier_url: "http://localhost:9100/verify"

    # JOLT Atlas CLI template â€” CHANGE THIS to your binary + flags
    # Placeholders: {model} {input} {label} {threshold} {output}
    prove_cmd_template: "atlas_argmax_prover --model {model} --input_npy {input} --assert-argmax {label} --verify --json"
